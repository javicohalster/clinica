
filtros en clientes


CREATE VIEW `app_requerimiento_vista` AS select `app_requerimiento`.`requ_id` AS `requ_id`,`app_requerimiento`.`usua_id` AS `usua_id`,`app_usuario`.`usua_nombre` AS `usua_nombre`,`app_usuario`.`usua_apellido` AS `usua_apellido`,`app_usuario`.`usua_email` AS `usua_email`,`app_requerimiento`.`requ_observacion` AS `requ_observacion`,`app_requerimiento`.`requ_categoria` AS `requ_categoria`,`app_tiemporespuesta`.`tiempres_nombre` AS `tiempres_nombre`,`app_pais`.`pais_nombre` AS `pais_nombre`,`app_canton`.`cant_nombre` AS `cant_nombre`,`app_requerimiento`.`requ_sector` AS `requ_sector`,`app_requerimiento`.`requ_barrio` AS `requ_barrio`,`app_requerimiento`.`requ_paracuando` AS `requ_paracuando`,`app_formapagocliente`.`fpagcl_nombre` AS `fpagcl_nombre`,`app_proveematerial`.`provee_nombre` AS `provee_nombre`,`app_requerimiento`.`ennot_id` AS `ennot_id`,`app_requerimiento`.`requ_fecharegistro` AS `requ_fecharegistro`,(select count(1) AS `total` from `app_manolevantada` where ((`app_manolevantada`.`requ_id` = `app_requerimiento`.`requ_id`) and (`app_manolevantada`.`manol_aceptado` = 1))) AS `totalmanosl`,(select count(1) AS `total` from `app_manolevantada` where ((`app_manolevantada`.`requ_id` = `app_requerimiento`.`requ_id`) and (`app_manolevantada`.`manol_aprobadocliente` = 1))) as total_aprobados,(select count(1) AS `npreg` from `app_manolevantada` where ((((`app_manolevantada`.`manol_noclaro` + `app_manolevantada`.`manol_nofoto`) + `app_manolevantada`.`manol_nofecha`) > 0) and (`app_manolevantada`.`requ_id` = `app_requerimiento`.`requ_id`))) AS `total_aclara`,(`app_requerimiento`.`requ_fecharegistro` + interval `app_tiemporespuesta`.`tiempres_horas` day) AS `fecha_fin`,(to_days((`app_requerimiento`.`requ_fecharegistro` + interval `app_tiemporespuesta`.`tiempres_horas` day)) - to_days(`app_requerimiento`.`requ_fecharegistro`)) AS `resta_fechas` from ((((((`app_requerimiento` join `app_usuario` on((`app_requerimiento`.`usua_id` = `app_usuario`.`usua_id`))) join `app_tiemporespuesta` on((`app_requerimiento`.`tiempres_id` = `app_tiemporespuesta`.`tiempres_id`))) join `app_pais` on((`app_requerimiento`.`pais_id` = `app_pais`.`pais_id`))) left join `app_canton` on((`app_requerimiento`.`cant_id` = `app_canton`.`cant_id`))) join `app_formapagocliente` on((`app_requerimiento`.`fpagcl_id` = `app_formapagocliente`.`fpagcl_id`))) join `app_proveematerial` on((`app_requerimiento`.`provee_id` = `app_proveematerial`.`provee_id`))) order by `app_requerimiento`.`requ_fecharegistro` desc;
